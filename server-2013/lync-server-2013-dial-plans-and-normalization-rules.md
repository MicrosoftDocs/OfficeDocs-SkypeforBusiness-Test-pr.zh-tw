---
title: Lync Server 2013：撥號對應表和正規化規則
TOCTitle: 撥號對應表和正規化規則
ms:assetid: fde45195-6eb4-403c-9094-57df7fc0bd2a
ms:mtpsurl: https://technet.microsoft.com/zh-tw/library/Gg413082(v=OCS.15)
ms:contentKeyID: 49292918
ms.date: 08/24/2015
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Lync Server 2013 中的撥號對應表和正規化規則

 

_**上次修改主題的時間：** 2015-03-09_

撥號對應表是一個具名的正規化規則集，可將具名位置、個別使用者或連絡人物件的電話號碼轉譯成單一標準 (E.164) 格式，以便進行電話授權和電話路由傳送。

正規化規則會針對每個指定位置、使用者或連絡人物件，定義要如何路由傳送以各種格式表達的電話號碼。相同的撥號字串可能會因撥號地點的位置，以及撥打電話的人員或連絡人物件而有不同的解譯和轉譯。

## 撥號對應表範圍

撥號對應表的 *範圍* 確定可套用撥號對應表的階層層級。在 Lync Server 中，可以為使用者指派特定的每位使用者撥號對應表。如果未指派使用者撥號對應表，將套用登錄器集區撥號對應表。如果沒有登錄器集區撥號對應表，將套用網站撥號對應表。最後，如果沒有適用於使用者的其他撥號對應表，將套用全域撥號對應表。

透過使用者登入 Lync Server 時提供的頻內佈建設定，用戶端可取得撥號對應表範圍層級。作為管理員，您可以使用 Lync Server 控制台 管理和指派撥號對應表範圍層級。

> [!NOTE]  
> 服務層級公用交換電話網路 PSTN 閘道撥號對應表會套用到特定閘道中的來電。



撥號對應表範圍層級的定義如下：

  - **使用者撥號對應表 ：** 可以指派給個別使用者、群組或連絡人物件。語音應用程式可在收到電話內容設為使用者預設值的通話時，查閱每位使用者撥號對應表。為了指派撥號對應表，會將連絡人物件視為個別使用者。

  - **集區撥號對應表 ：** 可以在服務層級為拓撲中的任何 PSTN 閘道或登錄器建立。若要定義集區撥號對應表，必須指定撥號對應表套用到的特定服務 (PSTN 閘道或登錄器集區)。

  - **網站撥號對應表 ：** 可以為整個網站建立 (除了已指派集區撥號對應表或使用者撥號對應表的任何使用者、群組或連絡人物件)。若要定義網站撥號對應表，必須指定撥號對應表套用到的網站。

  - **全域撥號對應表 ：** 產品安裝的預設撥號對應表。可以編輯全域撥號對應表，但不能將其刪除。除非設定並指派範圍更具體的撥號對應表，否則此撥號對應表會套用到部署中的所有 企業語音 使用者、群組及連絡人物件。

## 規劃撥號對應表

若要規劃撥號對應表，請依照下列步驟進行：

  - 列出您的組織有辦公室之所在地的所有地區設定。
    
    這份清單必須隨時更新且納入完整資訊，當公司組織不斷發展時，也需要修改這份清單。在有許多小型分公司的大型跨國公司中，這可能是一件耗時的工作。

  - 識別每個網站的有效號碼模式。
    
    在規劃撥號對應表時，最耗時的部分就是識別每個網站的有效號碼模式。在某些情況下，您可以將之前為某個撥號對應表撰寫的正規化規則複製到其他撥號對應表，特別是當對應的網站位於相同的國家/地區或甚至是相同的大陸時。在其他情況下，某個撥號對應表中號碼的小變更可能足以用於其他撥號對應表。

  - 開發整個組織的配置來命名撥號對應表。
    
    採用標準命名配置可確保在整個組織中都是一致的，並且讓維護及更新更輕鬆。

  - 決定單一位置是否需要多個撥號對應表。
    
    如果您的組織在多個位置中維護單一撥號對應表，您可能仍然需要針對從專用交換機 (PBX) 移轉且需要保留其現有分機的 企業語音 使用者建立個別撥號對應表。

  - 決定是否需要每一使用者的撥號對應表。例如，如果分支網站的使用者向中央網站註冊或使用者在 Survivable Branch Appliance 上註冊，針對這樣的使用者，您可考慮使用每一使用者撥號對應表和正規化規則的特殊撥號案例。如需詳細資訊，請參閱 [Lync Server 2013 的分支網站復原需求](lync-server-2013-branch-site-resiliency-requirements.md)＞。

  - 確定撥號對應表範圍 (如本主題先前所述)。

若要建立撥號對應表，請根據需要使用 Lync Server 控制台 或 Lync Server 管理命令介面 在下列欄位中指定值。

## 名稱和簡單名稱

對於使用者撥號對應表，您應該指定一個描述性名稱，以識別撥號對應表將指派到的使用者、群組或連絡人物件。對於網站撥號對應表，將使用網站名稱預先填入 \[名稱\] 欄位並且無法變更該欄位。對於集區撥號對應表，將使用 PSTN 閘道或前端集區完整網域名稱 (FQDN) 預先填入 \[名稱\] 欄位並且無法變更該欄位。

將使用從撥號對應表名稱衍生的字串預先填入撥號對應表 *簡單名稱* 。\[簡單名稱\] 欄位可編輯，並且可讓您為撥號對應表建立更具描述性的命名慣例。 *簡單名稱* 值不能為空且必須唯一。最好的做法是開發整個組織的命名慣例，並在所有網站和使用者中一直使用此慣例。

## 說明

我們建議您輸入要套用對應撥號對應表之地理位置的一般可辨識名稱。例如，假設撥號對應表名稱是 London.Contoso.com，則建議的描述將是 London。

## 電話撥入式會議區域

如果要部署電話撥入式會議，您將需要指定電話撥入式會議區域，以將電話撥入式會議存取號碼與撥號對應表關聯。

## 外部存取首碼

如果使用者需要撥一個或多個額外前置數 (例如 9) 來取得外部線路，則可以將外部存取首碼指定為最多四個字元 (\#、\* 和 0-9)。

> [!NOTE]  
> 如果指定了外部存取首碼，則不需要建立額外的正規化規則來容納首碼。



## 正規化規則

正規化規則會定義以各種格式表達的電話號碼要如何針對具名位置路由傳送。相同的號碼字串可能會根據撥號地點的地區設定而有不同的解譯和轉譯。電話路由需要正規化規則，因為使用者在其連絡人清單中輸入電話號碼時，往往可以使用各種格式。

將使用者提供的電話號碼正規化時，便提供了有助於下列作業的一致格式：

  - 將撥打的號碼與目標接聽者的 SIP-URI 相比對。

  - 將撥號授權規則套用到撥號方。

下列號碼欄位是正規化規則可能需要代表的一些欄位：

  - 撥號對應表

  - 國碼/地區碼

  - 區域碼

  - 分機號碼長度

  - 網站首碼

## 建立正規化規則

正規化規則將使用 .NET Framework 規則運算式指定數字符合模式，該模式可供伺服器用來將撥號字串轉譯為 E.164 格式，以便於執行反向號碼查詢。在 Lync Server 控制台 中建立正規化規則，方法是手動輸入運算式，或輸入要符合的撥號字串的起始位數和長度，並讓 Lync Server 控制台 產生對應的規則運算式。不管使用哪種方法，完成後，您都可以輸入測試號碼來確認正規化規則是否如預期運作。

如需使用 .NET Framework 規則運算式的詳細資訊，請參閱＜.NET Framework 規則運算式＞，網址為 [http://go.microsoft.com/fwlink/?linkid=140927\&clcid=0x404](http://go.microsoft.com/fwlink/?linkid=140927%26clcid=0x404)。

## 正規化規則範例

下表顯示以 .NET Framework 規則運算式撰寫的正規化規則範例。這些範例只當做範例使用，並非建立您自己的正規化規則的規定性參考。

### 表 1. 使用 .NET Framework 規則運算式的正規化規則

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>規則名稱</th>
<th>說明</th>
<th>號碼模式</th>
<th>轉譯</th>
<th>範例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>4digitExtension</p></td>
<td><p>轉譯 4 位數的分機號碼</p></td>
<td><p>^(\d{4})$</p></td>
<td><p>+1425555$1</p></td>
<td><p>0100 會轉譯成 +14255550100</p></td>
</tr>
<tr class="even">
<td><p>5digitExtension</p></td>
<td><p>轉譯 5 位數的分機號碼</p></td>
<td><p>^5(\d{4})$</p></td>
<td><p>+1425555$1</p></td>
<td><p>50100 會轉譯成 +14255550100</p></td>
</tr>
<tr class="odd">
<td><p>7digitcallingRedmond</p></td>
<td><p>將 7 位數號碼轉譯成 Redmond 本地號碼</p></td>
<td><p>^(\d{7})$</p></td>
<td><p>+1425$1</p></td>
<td><p>5550100 會轉譯成 +14255550100</p></td>
</tr>
<tr class="even">
<td><p>7digitcallingDallas</p></td>
<td><p>將 7 位數號碼轉譯成 Dallas 本地號碼</p></td>
<td><p>^(\d{7})$</p></td>
<td><p>+1972$1</p></td>
<td><p>5550100 會轉譯成 +19725550100</p></td>
</tr>
<tr class="odd">
<td><p>10digitcallingUS</p></td>
<td><p>轉譯美國地區的 10 位數號碼</p></td>
<td><p>^(\d{10})$</p></td>
<td><p>+1$1</p></td>
<td><p>2065550100 會轉譯成 +12065550100</p></td>
</tr>
<tr class="even">
<td><p>LDCallingUS</p></td>
<td><p>轉譯美國地區有長途電話首碼的號碼</p></td>
<td><p>^1(\d{10})$</p></td>
<td><p>+$1</p></td>
<td><p>12145550100 會轉譯成 +2145550100</p></td>
</tr>
<tr class="odd">
<td><p>IntlCallingUS</p></td>
<td><p>轉譯美國地區有國際電話首碼的號碼</p></td>
<td><p>^011(\d*)$</p></td>
<td><p>+$1</p></td>
<td><p>01191445550100 會轉譯成 +91445550100</p></td>
</tr>
<tr class="even">
<td><p>RedmondOperator</p></td>
<td><p>將 0 轉譯成 Redmond 電話總機</p></td>
<td><p>^0$</p></td>
<td><p>+14255550100</p></td>
<td><p>0 會轉譯成 +14255550100</p></td>
</tr>
<tr class="odd">
<td><p>RedmondSitePrefix</p></td>
<td><p>轉譯含有網內互打首碼 (6) 和 Redmond 網站碼 (222) 的號碼</p></td>
<td><p>^6222(\d{4})$</p></td>
<td><p>+1425555$1</p></td>
<td><p>62220100 會轉譯成 +14255550100</p></td>
</tr>
<tr class="even">
<td><p>NYSitePrefix</p></td>
<td><p>轉譯含有網內互打首碼 (6) 和 NY 網站碼 (333) 的號碼</p></td>
<td><p>^6333(\d{4})$</p></td>
<td><p>+1202555$1</p></td>
<td><p>63330100 會轉譯成 +12025550100</p></td>
</tr>
<tr class="odd">
<td><p>DallasSitePrefix</p></td>
<td><p>轉譯含有網內互打首碼 (6) 和 Dallas 網站碼 (444) 的號碼</p></td>
<td><p>^6444(\d{4})$</p></td>
<td><p>+1972555$1</p></td>
<td><p>64440100 會轉譯成 +19725550100</p></td>
</tr>
</tbody>
</table>


下表說明美國華盛頓州 Redmond 的範例撥號對應表 (根據上表所示的正規化規則)。

### 表 2. 依據表 1 所示之正規化規則建立的 Redmond 撥號對應表

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Redmond.forestFQDN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>5digitExtension</p></td>
</tr>
<tr class="even">
<td><p>7digitcallingRedmond</p></td>
</tr>
<tr class="odd">
<td><p>10digitcallingUS</p></td>
</tr>
<tr class="even">
<td><p>IntlCallingUS</p></td>
</tr>
<tr class="odd">
<td><p>RedmondSitePrefix</p></td>
</tr>
<tr class="even">
<td><p>NYSitePrefix</p></td>
</tr>
<tr class="odd">
<td><p>DallasSitePrefix</p></td>
</tr>
<tr class="even">
<td><p>RedmondOperator</p></td>
</tr>
</tbody>
</table>


> [!NOTE]  
> 上一個表格中所示的正規化規則名稱不包含空格，不過這是選擇的問題。例如，表格中的名字也可以撰寫為「5 digit extension」或「5-digit Extension」，仍會有效。


